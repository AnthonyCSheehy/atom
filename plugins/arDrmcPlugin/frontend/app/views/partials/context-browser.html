<div ng-class="{ cb: true, content: true, 'cb-fullscreen': isFullscreen, 'cb-maximized': isMaximized }">

  <section class="cb-inner">

    <!-- Header -->
    <div class="cb-menu menu-list">

      <!-- Heading -->
      <ul class="menu-list-left inline">
        <li><h2>Context Browser</h2></li>
      </ul>

      <!-- Menu -->
      <ul class="menu-list-right nav nav-pills">

        <!-- Toogle relationships -->
        <li ng-class="{ active: areRelationshipsHidden }">
          <a href class="hide_relationships" ng-click="hideRelationships()">
            {{ areRelationshipsHidden ? 'Show relationships' : 'Hide relationships' }}
          </a>
        </li>

        <!-- Fullscreen -->
        <li ng-class="{ active: isFullscreen }">
          <a href ng-click="toggleFullscreenMode()" class="fullscreen">
            {{ isFullscreen ? 'Exit fullscreen' : 'Fullscreen' }}
          </a>
        </li>

        <!-- Maximize -->
        <li ng-if="!isFullscreen">
          <a href ng-click="toggleMaximizedMode()" ng-class="{ maximize: !isMaximized, minimize: isMaximized }">
            {{ isMaximized ? 'Minimize' : 'Maximize' }}
          </a>
        </li>

        <!-- List relationships (.list_relationships) -->

        <!-- Expand all -->
        <li class="dropdown">
          <a href class="expand_all dropdown-toggle" data-toggle="dropdown">Expand all</a>
        </li>

      </ul>

    </div>

    <!-- Body -->
    <div class="cb-body">

      <!-- Context browser -->
      <div class="cb-container">

        <!-- Container -->
        <div class="svg-container"/>

      </div>

      <!-- Sidebar -->
      <div class="cb-sidebar">

        <div class="cb-sidebar-top">

          <!-- Bulk edit -->
          <div ng-if="hasNodesSelected()" class="cb-sidebar-basic-box cb-list-active-nodes">
            <h3>Bulk edit ({{ getNumberOfSelectedNodes() }} items)</h3>
            <div class="node-metadata">
              <p>
                <span ng-repeat="node in activeNodes">{{ node.data.title }}<br /></span>
              </p>
            </div>
            <div class="node-actions">
              <a href class="btn btn-small" ng-click="moveNodes('selected')"><i class="icon-move"></i><span>Move</span></a>
              <a href class="btn btn-small" ng-click="linkNodes('selected')"><i class="icon-link"></i><span>Link</span></a>
              <a href class="btn btn-small btn-delete" ng-click="deleteNodes('selected')"><i class="icon-remove"></i><span>Delete</span></a>
              <a href class="btn btn-small pull-right" ng-click="cancelBulkEdit()">Cancel</a>
            </div>
          </div>

          <!-- Single node detail -->
          <div ng-if="hasNodeSelected()" class="cb-sidebar-basic-box">
            <h3 class="node-level-{{ lastSelection.data.level }}">{{ lastSelection.data.title }}</h3>
            <!-- Dublin Core metadata -->
            <div ng-if="lastSelection.data.dc" class="node-metadata">
              <h4>Dublin Core metadata</h4>
              <ul>
                <li ng-repeat="(key, value) in lastSelection.data.dc">
                  <strong class="label">{{ key }}</strong>
                  <p>{{ renderDCValue(value) }}</p>
                </li>
              </ul>
            </div>
            <div class="node-actions">
              <a href class="btn btn-small" ng-click="addChildNode(lastSelection.id)"><i class="icon-plus"></i><span>Add child</span></a>
              <a href class="btn btn-small" ng-click="editNode(lastSelection.id)"><i class="icon-edit"></i><span>Edit node</span></a>
              <a href class="btn btn-small" ng-click="linkNodes(lastSelection.id)"><i class="icon-link"></i><span>Link node</span></a>
              <a href class="btn btn-small" ng-click="moveNodes(lastSelection.id)"><i class="icon-move"></i><span>Move</span></a>
              <a href class="btn btn-small btn-delete" ng-click="deleteNodes(lastSelection.id)"><i class="icon-remove"></i><span>Delete</span></a>
            </div>
          </div>

          <!-- File list -->
          <div ng-if="hasNodeSelected() && hasFiles()" class="cb-sidebar-basic-box">
            <h3>File list ({{ files.length }} items)</h3>
            <div class="node-metadata">
              <p ng-repeat="file in files">{{ file.label }}</p>
            </div>
          </div>

        </div>

        <div class="cb-sidebar-bottom">
          <!-- Legend -->
          <div class="cb-legend">
            <ul class="nav nav-stacked">
              <li class="legend-work">Work</li>
              <li class="legend-description">Description</li>
              <li class="legend-physical-component">Physical component</li>
              <li class="legend-digital-object">Digital object</li>
            </ul>
          </div>
        </div>

      </div>

    </div>

  </section>

</div>
