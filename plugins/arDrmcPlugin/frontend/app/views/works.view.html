<div class="row-fluid">

  <div class="span12">

    <h1 class="moma-title drmc-color-artwork-record">{{ title }}</h1>

    <section class="breadcrumb">
      <ul>
        <li><a ui-sref="main.search.entity({ entity: 'works'})">Works</a></li>
        <li><span>{{ work.title }}</span></li>
      </ul>
    </section>

  </div>

</div>

<div class="row-fluid">

  <div class="span12">
    <div id="main-column">

      <section class="moma-tms" ng-if="work.tms != undefiend">
        <div class="row-fluid">

          <div class="span5" ng-if="work.tms.fullImage != undefined">
            <img ng-src="{{ work.tms.fullImage }}" />
          </div>

          <div ng-class="{ content: true, span7: work.tms.fullImage != undefined, span12: work.tms.fullImage == undefined }">
            <section>
              <div class="menu-list">
                <ul class="menu-list-left">
                  <li><h2>TMS metadata</h2></li>
                </ul>
              </div>
              <div>
                <div class="field" ng-if="work.tms.accessionNumber != undefined">
                  <h3>Accession number</h3>
                  <div>{{ work.tms.accessionNumber }}</div>
                </div>
                <div class="field" ng-if="work.tms.objectId != undefined">
                  <h3>Object ID</h3>
                  <div>{{ work.tms.objectId }}</div>
                </div>
                <div class="field" ng-if="work.tms.title != undefined">
                  <h3>Title</h3>
                  <div>{{ work.tms.title }}</div>
                </div>
                <div class="field" ng-if="work.tms.year != undefined">
                  <h3>Year</h3>
                  <div>{{ work.tms.year }}</div>
                </div>
                <div class="field" ng-if="work.tms.artist != undefined">
                  <h3>Artist</h3>
                  <div>
                    {{ work.tms.artist }}
                    <span ng-if="works.tms.artistDate != undefined">{{ work.tms.artistDate }}</span>
                  </div>
                </div>
                <div class="field" ng-if="work.tms.classification != undefined">
                  <h3>Classification</h3>
                  <div>{{ work.tms.classification }}</div>
                </div>
                <div class="field" ng-if="work.tms.department != undefined">
                  <h3>Department</h3>
                  <div>{{ work.tms.department }}</div>
                </div>
                <div class="field" ng-if="work.tms.medium != undefined">
                  <h3>Medium</h3>
                  <div>{{ work.tms.medium }}</div>
                </div>
                <div class="field" ng-if="work.tms.dimensions != undefined">
                  <h3>Dimensions</h3>
                  <div>{{ work.tms.dimensions }}</div>
                </div>
                <div class="field" ng-if="work.tms.description != undefined">
                  <h3>Description</h3>
                  <div>{{ work.tms.description }}</div>
                </div>
              </div>
            </section>
          </div>

        </div>
      </section>

      <ar:context-browser-artwork id="{{ work.id }}" user="user" files="files" on-select-node="selectNode()"></ar:context-browser-artwork>

      <div class="content">

        <section ng-if="aggregation != undefined">
          <div class="menu-list">
            <ul class="menu-list-left">
              <li><h2>Digital objects</h2></li>
            </ul>
          </div>
          <div>
            <div class="digital-object-aggregation">
              <div class="field">
                <h3>Total AIPs</h3>
                <div>
                  {{ aggregation.total.count || 0 }}
                  <span>&nbsp;{{ aggregation.total.size | UnitFilter:2 | EmptyFilter }}</span>
                </div>
              </div>
              <div class="field">
                <h3>Artwork component AIPs</h3>
                <div>{{ aggregation[179].count || 0 }}
                  <span>&nbsp;{{ aggregation[179].size | UnitFilter:2 | EmptyFilter }}</span>
                </div>
              </div>
               <div class="field">
                <h3>Artwork material AIPs</h3>
                <div>
                  {{ aggregation[180].count || 0 }}
                  <span>&nbsp;{{ aggregation[180].size | UnitFilter:2 | EmptyFilter }}</span>
                </div>
              </div>
              <div class="field">
                <h3>Supporting documentation AIPs</h3>
                <div>
                  {{ aggregation[181].count || 0 }}
                  <span>&nbsp;{{ aggregation[181].size | UnitFilter:2 | EmptyFilter }}</span>
                </div>
              </div>
              <div class="field">
                <h3>Supporting technology AIPs</h3>
                <div>
                  {{ aggregation[182].count || 0 }}
                  <span>&nbsp;{{ aggregation[182].size | UnitFilter:2 | EmptyFilter }}</span>
                </div>
              </div>
              <div class="field">
                <h3>Unclassified AIPs</h3>
                <div>
                  {{ aggregation.unclassified.count || 0 }}
                  <span>&nbsp;{{ aggregation.unclassified.size | UnitFilter:2 | EmptyFilter }}</span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section ng-if="files.length > 0">
          <div class="menu-list">
            <ul class="menu-list-left">
              <li><h2>Digital object browser</h2></li>
            </ul>
          </div>
          <div>
            <div class="digital-object-list">
              <table class="table">
                <thead>
                  <th>Preview</th>
                  <th>Filename</th>
                  <th>Size</th>
                  <th>AIP</th>
                  <th></th>
                </thead>
                <tbody>
                  <tr ng-repeat="file in files" ng-class="{ selected: file.selected == true }">
                    <!-- TODO layout from css -->
                    <td class="preview" width="20%">
                      <a href ng-click="downloadFile(file)"><img width="100%" ng-src="{{ file.thumbnail_path }}"/></a>
                    </td>
                    <td class="name">
                      <a href ng-click="openDigitalObjectModal(file)">{{ file.filename }}</a>
                    </td>
                    <td>{{ file.byte_size | UnitFilter:2 }}</td>
                    <td>
                      <a href ui-sref="main.aips.view({ uuid: file.aip_uuid })">{{ file.aip_title }}</a><br />
                      (<a href ng-click="downloadAip(file)" ng-show="user.canEdit()">download</a>)
                    </td>
                    <td><a href class="btn" ng-click="downloadFile(file)" ng-show="user.canEdit()">Download file</a></td>
                  </tr>
                </tbody>
              </table>
            </div>

          </div>
        </section>

      </div>

    </div>
  </div>

</div>
