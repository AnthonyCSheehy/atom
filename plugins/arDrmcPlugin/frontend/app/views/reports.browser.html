<div class="row-fluid reports-wrapper">

  <div class="span3">

    <section id="facets">
      <h3>Filter reports by:</h3>
      <!-- TODO : Wire directives when data is ready -->
      <ar-facet label="Report Type" facet="data.facets.type" field="criteria.type"></ar-facet>
      <ar-range-facet type="date" label="Date ingested" facet="data.facets.dateIngested" from="criteria.ingestedFrom" to="criteria.ingestedTo" callback="getDateRangeLabel(arg1, arg2, arg3)"></ar-range-facet>
    </section>

  </div>

  <div class="span9">

    <div id="main-column">

      <h1>Manage reports</h1>

      <!-- ································································· -->
      <!-- ReportsBrowserCtrl                                                -->
      <!-- ································································· -->
      <div class="content" ng-controller="ReportsBrowserCtrl">

        <section>
          <div class="menu-list">
            <ul class="menu-list-left">
              <li><h2>Reports overview</h2></li>
            </ul>
            <ul class="menu-list-right nav nav-pills">
              <li>
                <a href class="icon-plus" ng-click="openGenerateReportModal()">New report</a>
              </li>
            </ul>
          </div>
        </section>

        <section>
          <div class="field">
            <h3>No. of reports</h3>
            <div>
              {{ browseData.overview.counts['Total searches'] || 0 }}
            </div>
          </div>
          <div class="field">
            <h3>Last report added</h3>
            <div>
              <a href>{{ browseData.overview.latest['Last search added'].name || 'N/A' }}</a>
              &nbsp;&raquo;&nbsp;
              {{ browseData.overview.latest['Last search added'].date | date: 'short' }}
            </div>
          </div>
          <div class="field">
            <h3>Activity reports</h3>
            <div>
              {{ activityReportCount || 0 }}
            </div>
          </div>
          <div class="field">
            <h3>Fixity reports</h3>
            <div>
              {{ fixityReportCount || 0 }}
            </div>
          </div>
          <div class="field">
            <h3>Characteristic reports</h3>
            <div>
              {{ characteristicReportCount || 0 }}
            </div>
          </div>
        </section>

        <section>
          <div class="menu-list">
            <ul class="menu-list-left">
              <li><h2>Saved reports</h2></li>
            </ul>
          </div>
        </section>

        <section>
          <div class="browse-view-list">
            <table class="table table-bordered">
              <thead>
                <th>Name</th>
                <th>Report type</th>
                <th>Created</th>
                <th>Description</th>
                <th>Delete</th>
              </thead>
              <tbody>
                <tr ng-repeat="report in browseData.results">
                  <td><a href ui-sref="main.reports.view({ slug: report.slug })">{{ report.name }}</a></td>
                  <td>{{ report.type }}</td>
                  <td>{{ report.created_at | date: 'short' }}</td>
                  <td>{{ report.description }}</td>
                  <td><input type="checkbox" name="selectedReports[]" ng-checked="selectedReports.indexOf(id) > -1" value="{{ report.id }}" ng-click="toggleSelection(report.id)"/></td>
                </tr>
              </tbody>
            </table>

            <!-- This is placed purposefully away from the delete checkboxes
            so the user doesn't delete a report too easily -->
            <button class="btn" ng-disabled="selectedReports.length < 1" ng-click="delete()"><i class="icon-remove"></i> Delete</button>

          </div>
        </section>

      </div>

    </div>
  </div>
</div>
