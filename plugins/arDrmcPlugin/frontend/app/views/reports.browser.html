<div class="row-fluid reports-wrapper">

  <div class="span3">

    <section id="facets">
      <h3>Filter reports by:</h3>
      <!-- TODO : Wire directives when data is ready -->
      <ar-facet label="Report Type" facet="data.facets.type" field="criteria.type"></ar-facet>
      <ar-range-facet type="date" label="Date ingested" facet="data.facets.dateIngested" from="criteria.ingestedFrom" to="criteria.ingestedTo" callback="getDateRangeLabel(arg1, arg2, arg3)"></ar-range-facet>
    </section>

  </div>

  <div class="span9">

    <div id="main-column">

      <h1>Manage reports</h1>

      <section class="breadcrumb">
        <ul>
          <li><a ui-sref="main.dashboard">Dashboard</a></li>
          <li><a href ui-sref="main.reports.browser">Reports</a></li>
        </ul>
      </section>

      <div class="content">

        <section>
          <div class="menu-list" >
            <ul class="menu-list-left">
              <li><h2>Reports overview</h2></li>
            </ul>
            <ul class="menu-list-right nav nav-pills">
              <li>
                <a href class="icon-plus" ng-click="openGenerateReportModal()">New report</a>
              </li>
            </ul>
          </div>
        </section>

        <section ng-show="showReportsOverview">
          <div class="field">
            <h3>No. of reports</h3>
            <div>
              {{ reports.length || 0 }}
            </div>
          </div>
          <div class="field">
            <h3>Last report added</h3>
            <div>
            <!-- unsure if this will come from API, will format later if necessary -->
              TODO
              <span>&nbsp;{{ data.overview.total.size | UnitFilter:2 | EmptyFilter }}</span>
            </div>
          </div>
          <div class="field">
            <h3>Activity reports</h3>
            <div>
              {{ data.overview.total.count || 0 }}
              <span>&nbsp;{{ data.overview.total.size | UnitFilter:2 | EmptyFilter }}</span>
            </div>
          </div>
          <div class="field">
            <h3>Fixity reports</h3>
            <div>
              {{ data.overview.total.count || 0 }}
              <span>&nbsp;{{ data.overview.total.size | UnitFilter:2 | EmptyFilter }}</span>
            </div>
          </div>
          <div class="field">
            <h3>Characteristic reports</h3>
            <div>
              {{ data.overview.total.count || 0 }}
              <span>&nbsp;{{ data.overview.total.size | UnitFilter:2 | EmptyFilter }}</span>
            </div>
          </div>
        </section>

        <section>
          <div class="menu-list" >
            <ul class="menu-list-left">
              <li><h2>Saved reports</h2></li>
            </ul>
          </div>
        </section>

        <section>
          <div class="browse-view-list">
            <table class="table table-bordered">
              <thead>
                <th>Name</th>
                <th>Report type</th>
                <th>Created</th>
                <th>Description</th>
                <th></th>
              </thead>
              <tbody>
                <tr ng-repeat="report in reports track by $index | orderBy:predicate:reverse">
                  <td><a href ui-sref="main.reports.view({ id: report })" >{{ report.name }}</a></td>
                  <td>{{ report.type }}</td>
                  <td>{{ report.results.created_at }}</td>
                  <td><a href ng-click="downloadFile(item)" ng-show="user.canEdit()">Download</a></td>
                </tr>
              </tbody>
            </table>
            <pre>{{ reports.results | json }}</pre>
          </div>
        </section>

      </div>

    </div>
  </div>
</div>
